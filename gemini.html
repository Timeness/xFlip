<html class="scroll-smooth" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Next.Ai
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <script src="https://code.iconify.design/2/2.2.1/iconify.min.js">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600,700&amp;display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #0f172a;
      font-family: 'Inter', sans-serif;
      color: #d1d5db;
      overflow: hidden;
      font-size: 14px;
      line-height: 1.4;
      position: relative;
    }
    #root {
      height: 100%;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 10;
      background: transparent;
    }
    #background-image {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }
    #background-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.3) blur(20px);
      transform: scale(1.05);
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #6366f1cc;
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
    }
    .markdown p {
      margin: 0 0 0.75em 0;
      font-size: 0.875rem;
      line-height: 1.4;
    }
    .markdown strong {
      font-weight: 700;
      color: #f9fafb;
    }
    .markdown em {
      font-style: italic;
      color: #cbd5e1;
    }
    .markdown code {
      background-color: #1e293b88;
      color: #facc15;
      padding: 0.15em 0.4em;
      border-radius: 4px;
      font-family: 'Source Code Pro', monospace;
      font-size: 0.85rem;
    }
    .markdown pre {
      background-color: #1e293b88;
      padding: 1em;
      border-radius: 0.5rem;
      overflow-x: auto;
      font-family: 'Source Code Pro', monospace;
      font-size: 0.85rem;
      margin: 1em 0;
      color: #facc15;
      white-space: pre-wrap;
    }
    .markdown a {
      color: #6366f1cc;
      text-decoration: underline;
    }
    .chat-message {
      max-width: 70%;
      padding: 16px 24px;
      border-radius: 1.5rem;
      margin-bottom: 18px;
      line-height: 1.5;
      font-size: 0.95rem;
      white-space: pre-wrap;
      word-break: break-word;
      backdrop-filter: saturate(180%) blur(16px);
      background-color: rgba(30, 41, 59, 0.5);
      color: #e0e7ff;
      font-weight: 500;
      border: none !important;
      box-shadow: none !important;
    }
    .chat-user {
      background: rgba(99, 102, 241, 0.3);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 0.5rem;
      font-weight: 600;
      border: none !important;
      box-shadow: none !important;
      backdrop-filter: saturate(180%) blur(16px);
    }
    .chat-ai {
      background-color: rgba(30, 41, 59, 0.5);
      color: #d1d5db;
      align-self: flex-start;
      border-bottom-left-radius: 0.5rem;
      border: none !important;
      box-shadow: none !important;
      backdrop-filter: saturate(180%) blur(16px);
    }
    main {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      padding: 32px 48px;
      overflow-y: auto;
      gap: 22px;
      scrollbar-width: thin;
      scrollbar-color: #6366f1cc transparent;
      scroll-behavior: smooth;
      position: relative;
      z-index: 10;
    }
    .input-area {
      background-color: transparent !important;
      padding: 16px 32px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: none !important;
      backdrop-filter: none !important;
      border-radius: 0 0 1.5rem 1.5rem;
      z-index: 10;
      border: none !important;
    }
    .input-area textarea {
      flex-grow: 1;
      resize: none;
      background-color: transparent;
      border: none;
      color: #d1d5db;
      font-size: 1.1rem;
      font-family: 'Inter', sans-serif;
      min-height: 44px;
      max-height: 140px;
      line-height: 1.5;
      padding: 12px 20px;
      border-radius: 1.5rem;
      outline-offset: 2px;
      box-shadow: none;
      transition: box-shadow 0.3s ease;
      font-weight: 600;
      letter-spacing: 0.02em;
    }
    .input-area textarea::placeholder {
      color: #94a3b8cc;
      font-weight: 500;
    }
    .input-area textarea:focus {
      box-shadow: none;
      background-color: rgba(30, 41, 59, 0.7);
    }
    .input-area button {
      background-color: transparent !important;
      color: #d1d5db;
      border: none;
      padding: 14px 26px;
      font-weight: 600;
      font-size: 1.1rem;
      border-radius: 1.5rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: 'Inter', sans-serif;
      user-select: none;
      box-shadow: none !important;
      backdrop-filter: none !important;
    }
    .input-area button i {
      background-color: transparent !important;
      border-radius: 50%;
      padding: 6px;
      box-shadow: none !important;
      color: #d1d5db;
      font-weight: 600;
    }
    .input-area button:disabled {
      background-color: transparent !important;
      color: #6b7280;
      cursor: not-allowed;
      box-shadow: none !important;
    }
    .input-area button:hover:not(:disabled) {
      background-color: rgba(30, 41, 59, 0.7);
      color: #e0e7ff;
    }
    .loader {
      animation: spin 1.2s linear infinite;
      font-size: 28px;
      color: #6366f1cc;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .hidden {
      display: none !important;
    }
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    @media (max-width: 768px) {
      main {
        padding: 24px 24px;
      }
      .input-area {
        padding: 16px 24px;
      }
      .chat-message {
        max-width: 90%;
        font-size: 0.9rem;
      }
      .input-area textarea {
        font-size: 1rem;
      }
      .input-area button {
        font-size: 1rem;
        padding: 12px 22px;
      }
    }
    @media (max-width: 480px) {
      main {
        padding: 16px 16px;
      }
      .input-area {
        padding: 14px 16px;
      }
      .chat-message {
        max-width: 100%;
        font-size: 0.9rem;
      }
      .input-area textarea {
        font-size: 0.95rem;
      }
      .input-area button {
        font-size: 0.95rem;
        padding: 12px 20px;
      }
    }
  </style>
 </head>
 <body>
  <div aria-hidden="true" id="background-image">
   <img alt="Dark blurred futuristic cityscape at night with neon lights and mist, highly blurred and dimmed for background effect" decoding="async" height="1080" loading="lazy" src="https://storage.googleapis.com/a1aa/image/52d2e262-5ef6-47ae-6176-54ed23313c8e.jpg" width="1920"/>
  </div>
  <div aria-label="AI Chat Application" class="flex flex-col h-full" id="root" role="main">
   <main aria-label="Chat messages container" aria-live="polite" aria-relevant="additions" class="flex-grow overflow-y-auto" id="chat" tabindex="0">
   </main>
   <form aria-label="Send message form" autocomplete="off" class="input-area" id="inputForm" novalidate="">
    <textarea aria-label="Message input" class="resize-none" id="prompt" name="prompt" placeholder="Send a message." required="" rows="1" spellcheck="false"></textarea>
    <button aria-label="Send message" disabled="" id="sendBtn" type="submit">
     <i class="fas fa-paper-plane">
     </i>
     Send
    </button>
    <span aria-label="Loading" aria-live="polite" class="loader hidden" id="loader" role="status" title="Loading">
     <span class="iconify" data-icon="mdi:loading" data-inline="false" style="font-size: 28px; color: #6366f1;"></span>
    </span>
   </form>
  </div>
  <script>
   (() => {
      const chat = document.getElementById('chat');
      const form = document.getElementById('inputForm');
      const textarea = document.getElementById('prompt');
      const sendBtn = document.getElementById('sendBtn');
      const loader = document.getElementById('loader');
      const apiKey = 'AIzaSyDdXbdtNSV7KDuS-ADbHVl7ZoFLf3YI1zk';

      textarea.addEventListener('input', () => {
        sendBtn.disabled = textarea.value.trim().length === 0;
        autoResizeTextarea();
      });

      function autoResizeTextarea() {
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
      }
      autoResizeTextarea();

      function escapeHtml(text) {
        return text
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;');
      }

      function markdownToHtml(text) {
        let escaped = escapeHtml(text);
        escaped = escaped.replace(
          /```([\s\S]*?)```/g,
          (match, p1) =>
            `<pre><code>${p1.trim().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></pre>`
        );
        escaped = escaped.replace(
          /`([^`\n]+)`/g,
          '<code>$1</code>'
        );
        escaped = escaped.replace(
          /(\*\*|__)(.*?)\1/g,
          '<strong>$2</strong>'
        );
        escaped = escaped.replace(
          /(\*|_)(.*?)\1/g,
          '<em>$2</em>'
        );
        escaped = escaped.replace(
          /~~(.*?)~~/g,
          '<del>$1</del>'
        );
        escaped = escaped.replace(
          /\[([^\]]+)\]\(([^)]+)\)/g,
          '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'
        );
        escaped = escaped.replace(/\n/g, '<br>');
        return escaped;
      }

      function appendMessage(content, fromUser = false) {
        const message = document.createElement('div');
        message.classList.add('chat-message');
        message.classList.add(fromUser ? 'chat-user' : 'chat-ai');
        message.setAttribute('role', 'article');
        message.setAttribute('aria-label', fromUser ? 'User message' : 'AI response');
        message.innerHTML = markdownToHtml(content);
        chat.appendChild(message);
        chat.scrollTo({ top: chat.scrollHeight, behavior: 'smooth' });
      }

      function showLoader() {
        loader.classList.remove('hidden');
      }
      function hideLoader() {
        loader.classList.add('hidden');
      }

      async function handleSubmit(prompt) {
        if (!prompt) return;
        appendMessage(prompt, true);
        textarea.value = '';
        sendBtn.disabled = true;
        autoResizeTextarea();
        showLoader();
        try {
          const response = await fetch(
            `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                contents: [
                  {
                    parts: [
                      {
                        text: prompt,
                      },
                    ],
                  },
                ],
              }),
            }
          );
          const data = await response.json();
          if (data.candidates && data.candidates[0].content) {
            const aiResponse = data.candidates[0].content.parts[0].text;
            appendMessage(aiResponse, false);
          } else {
            appendMessage(
              'No response from AI. Please try again.',
              false
            );
          }
        } catch (error) {
          appendMessage(
            'Error: Could not connect to AI service.',
            false
          );
          console.error(error);
        } finally {
          hideLoader();
          textarea.focus();
        }
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const prompt = textarea.value.trim();
        handleSubmit(prompt);
      });

      window.addEventListener('load', () => {
        textarea.focus();
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('query');
        if (query && query.trim().length > 0) {
          textarea.value = query.trim();
          sendBtn.disabled = false;
          autoResizeTextarea();
          handleSubmit(query.trim());
        }
      });
    })();
  </script>
 </body>
  </html>
