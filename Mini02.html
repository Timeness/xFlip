<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Browser</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Optional custom styles */
        #threejs-container canvas {
            width: 100% !important;
            height: 100% !important;
            display: block; /* Prevent extra space below canvas */
        }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col">
    <div class="bg-white shadow-md p-4 flex items-center">
        <input type="text" id="urlInput" class="flex-grow mr-2 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter URL">
        <button id="loadButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 inline-block mr-1">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9" />
            </svg>
            Go
        </button>
        <button id="backButton" class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-3 rounded focus:outline-none focus:shadow-outline">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 inline-block">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
        </button>
        <button id="forwardButton" class="ml-2 bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-3 rounded focus:outline-none focus:shadow-outline">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 inline-block">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
        </button>
    </div>

    <div id="threejs-container" class="relative w-full h-32 overflow-hidden">
        <!-- Three.js canvas will be inserted here -->
    </div>

    <div class="flex-grow overflow-hidden">
        <iframe id="browserFrame" class="w-full h-full border-none"></iframe>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlInput = document.getElementById('urlInput');
            const loadButton = document.getElementById('loadButton');
            const browserFrame = document.getElementById('browserFrame');
            const backButton = document.getElementById('backButton');
            const forwardButton = document.getElementById('forwardButton');
            const threejsContainer = document.getElementById('threejs-container');

            // Function to load URL
            const loadURL = (url) => {
                if (url.startsWith('http://') || url.startsWith('https://')) {
                    browserFrame.src = url;
                } else if (url !== '') {
                    browserFrame.src = `http://${url}`; // Default to http if no protocol
                }
            };

            // Event listener for load button
            loadButton.addEventListener('click', () => {
                const url = urlInput.value;
                loadURL(url);
            });

            // Event listener for input enter key
            urlInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    loadButton.click();
                }
            });

            // Navigation history (basic implementation)
            const history = [];
            let historyIndex = -1;

            browserFrame.onload = () => {
                const currentURL = browserFrame.contentWindow.location.href;
                if (currentURL !== 'about:blank' && historyIndex < history.length - 1) {
                    history.splice(historyIndex + 1); // Remove forward history
                }
                if (currentURL !== history.at(historyIndex)) {
                    history.push(currentURL);
                    historyIndex = history.length - 1;
                }
                backButton.disabled = historyIndex <= 0;
                forwardButton.disabled = historyIndex >= history.length - 1;
            };

            backButton.addEventListener('click', () => {
                if (historyIndex > 0) {
                    historyIndex--;
                    browserFrame.src = history.at(historyIndex);
                    backButton.disabled = historyIndex <= 0;
                    forwardButton.disabled = historyIndex >= history.length - 1;
                }
            });

            forwardButton.addEventListener('click', () => {
                if (historyIndex < history.length - 1) {
                    historyIndex++;
                    browserFrame.src = history.at(historyIndex);
                    backButton.disabled = historyIndex <= 0;
                    forwardButton.disabled = historyIndex >= history.length - 1;
                }
            });

            // --- Three.js Integration ---
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, threejsContainer.offsetWidth / threejsContainer.offsetHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true }); // Enable transparency and antialiasing
            renderer.setSize(threejsContainer.offsetWidth, threejsContainer.offsetHeight);
            threejsContainer.appendChild(renderer.domElement);
            renderer.setClearColor(0xffffff, 0); // Transparent background

            // Example: Create a rotating globe (requires more Three.js knowledge and assets if you want detailed textures)
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: 0x00bfff, wireframe: true });
            const globe = new THREE.Mesh(geometry, material);
            scene.add(globe);

            camera.position.z = 2;

            const animate = () => {
                requestAnimationFrame(animate);

                globe.rotation.y += 0.005;

                renderer.render(scene, camera);
            };

            animate();

            // Handle resizing
            window.addEventListener('resize', () => {
                camera.aspect = threejsContainer.offsetWidth / threejsContainer.offsetHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(threejsContainer.offsetWidth, threejsContainer.offsetHeight);
            });
        });
    </script>
</body>
</html>
